% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxtsr}
\usepackage[utf8]{inputenc}
\DeclareUnicodeCharacter{00A0}{\nobreakspace}
\usepackage[T1]{fontenc}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{longtable}
\usepackage{sphinx}

\usepackage{amsmath}
\DeclareUnicodeCharacter{00A0}{\nobreakspace}

% In the parameters section, place a newline after the Parameters
% header
\usepackage{expdlist}
\let\latexdescription=\description
\def\description{\latexdescription{}{} \breaklabel}

% Make Examples/etc section headers smaller and more compact
\makeatletter
\titleformat{\paragraph}{\normalsize\py@HeaderFamily}%
            {\py@TitleColor}{0em}{\py@TitleColor}{\py@NormalColor}
\titlespacing*{\paragraph}{0pt}{1ex}{0pt}

% Fix footer/header
\@ifundefined{chaptermark}{%
\newcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\thechapter.\ #1}}{}}
}{%
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\thechapter.\ #1}}{}}
}

\@ifundefined{chaptermark}{%
\newcommand{\sectionmark}[1]{\markright{\MakeUppercase{\thesection.\ #1}}}
}{%
\renewcommand{\sectionmark}[1]{\markright{\MakeUppercase{\thesection.\ #1}}}
}

\@ifundefined{TSR}{}{%
\renewcommand{\py@HeaderFamily}{\rmfamily\bfseries}
\definecolor{TitleColor}{rgb}{0,0,0}
\renewcommand{\appendix}{\par
  \setcounter{section}{0}%
  \inapptrue%
  \renewcommand\thesection{\@Alph\c@section}}
}

\makeatother

% Make the pages always arabic, and don't do any pages without page
% numbers
\pagenumbering{arabic}
\pagestyle{plain}


\title{TSR 2011-4: Comparison of Synphot and Pysynphot Bandpar Functionality}
\date{November 15, 2011}
\release{2011-4 }
\author{Matt Davis}
\newcommand{\sphinxlogo}{\includegraphics{stsci_logo.pdf}\par}
\renewcommand{\releasename}{Release}
\makeindex

\makeatletter
\def\PYG@reset{\let\PYG@it=\relax \let\PYG@bf=\relax%
    \let\PYG@ul=\relax \let\PYG@tc=\relax%
    \let\PYG@bc=\relax \let\PYG@ff=\relax}
\def\PYG@tok#1{\csname PYG@tok@#1\endcsname}
\def\PYG@toks#1+{\ifx\relax#1\empty\else%
    \PYG@tok{#1}\expandafter\PYG@toks\fi}
\def\PYG@do#1{\PYG@bc{\PYG@tc{\PYG@ul{%
    \PYG@it{\PYG@bf{\PYG@ff{#1}}}}}}}
\def\PYG#1#2{\PYG@reset\PYG@toks#1+\relax+\PYG@do{#2}}

\def\PYG@tok@gd{\def\PYG@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\def\PYG@tok@gu{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\def\PYG@tok@gt{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.25,0.82}{##1}}}
\def\PYG@tok@gs{\let\PYG@bf=\textbf}
\def\PYG@tok@gr{\def\PYG@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\def\PYG@tok@cm{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\def\PYG@tok@vg{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\def\PYG@tok@m{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\def\PYG@tok@mh{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\def\PYG@tok@cs{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}\def\PYG@bc##1{\colorbox[rgb]{1.00,0.94,0.94}{##1}}}
\def\PYG@tok@ge{\let\PYG@it=\textit}
\def\PYG@tok@vc{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\def\PYG@tok@il{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\def\PYG@tok@go{\def\PYG@tc##1{\textcolor[rgb]{0.19,0.19,0.19}{##1}}}
\def\PYG@tok@cp{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@gi{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\def\PYG@tok@gh{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\def\PYG@tok@ni{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.84,0.33,0.22}{##1}}}
\def\PYG@tok@nl{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.13,0.44}{##1}}}
\def\PYG@tok@nn{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\def\PYG@tok@no{\def\PYG@tc##1{\textcolor[rgb]{0.38,0.68,0.84}{##1}}}
\def\PYG@tok@na{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@nb{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@nc{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\def\PYG@tok@nd{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.33,0.33,0.33}{##1}}}
\def\PYG@tok@ne{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@nf{\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.49}{##1}}}
\def\PYG@tok@si{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.44,0.63,0.82}{##1}}}
\def\PYG@tok@s2{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@vi{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\def\PYG@tok@nt{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.45}{##1}}}
\def\PYG@tok@nv{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\def\PYG@tok@s1{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@gp{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\def\PYG@tok@sh{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@ow{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@sx{\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\def\PYG@tok@bp{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@c1{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\def\PYG@tok@kc{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@c{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\def\PYG@tok@mf{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\def\PYG@tok@err{\def\PYG@bc##1{\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{##1}}}
\def\PYG@tok@kd{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@ss{\def\PYG@tc##1{\textcolor[rgb]{0.32,0.47,0.09}{##1}}}
\def\PYG@tok@sr{\def\PYG@tc##1{\textcolor[rgb]{0.14,0.33,0.53}{##1}}}
\def\PYG@tok@mo{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\def\PYG@tok@mi{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\def\PYG@tok@kn{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@o{\def\PYG@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\def\PYG@tok@kr{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@s{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@kp{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@w{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\def\PYG@tok@kt{\def\PYG@tc##1{\textcolor[rgb]{0.56,0.13,0.00}{##1}}}
\def\PYG@tok@sc{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@sb{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@k{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\def\PYG@tok@se{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\def\PYG@tok@sd{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}

\def\PYGZat{@}
\def\PYGZlb{[}
\def\PYGZrb{]}
\makeatother

\begin{document}

\maketitle
\tableofcontents
\phantomsection\label{index::doc}


Contents:


\chapter{Comparison of Synphot and Pysynphot Bandpar Functionality}
\label{main:comparison-of-synphot-and-pysynphot-bandpar-functionality}\label{main:tsr-2011-4-comparison-of-synphot-and-pysynphot-bandpar-functionality}\label{main::doc}
\begin{abstract}

Pysynphot attempts to replicate much of the functionality of the Synphot
\href{https://svn.stsci.edu/trac/ssb/stsci\_python/browser/stsdas/trunk/stsdas/pkg/hst\_calib/synphot/doc/bandpar.hlp}{bandpar}
utility but sometimes uses different formulae and algorithms.
This TSR collects the calculations used in Pysynphot, Synphot, the
formulae described in the \href{http://stsdas.stsci.edu/stsci\_python\_epydoc/SynphotManual.pdf}{Synphot Manual} in Section 5.1 on page 42,
and the formulae in the Synphot help files.

\end{abstract}


\chapter{RMS Width - BANDW - PHOTBW}
\label{main:synphot-manual}\label{main:rms-width-bandw-photbw}

\section{Summary}
\label{main:summary}
This value is added to image headers in the PHOTBW keyword.

\textbf{Pysynphot}
\begin{itemize}
\item {} 
\emph{Function name}: \href{https://trac.assembla.com/astrolib/browser/trunk/pysynphot/lib/pysynphot/spectrum.py\#L1106}{SpectralElement.rmswidth}

\item {} 
\emph{Source code}: \href{https://trac.assembla.com/astrolib/browser/trunk/pysynphot/lib/pysynphot/spectrum.py}{spectrum.py}

\item {} 
\emph{References}: {\hyperref[references:ref3]{\emph{3 page 836}}}

\end{itemize}

\textbf{Synphot}
\begin{itemize}
\item {} 
\emph{Bandpar name}: \href{https://svn.stsci.edu/trac/ssb/stsci\_python/browser/stsdas/trunk/stsdas/pkg/hst\_calib/synphot/doc/bandpar.hlp}{BANDW}

\item {} 
\emph{Function name}: \href{https://svn.stsci.edu/trac/ssb/stsci\_python/browser/stsdas/trunk/stsdas/lib/synphot/rmslam.x}{rmslam} called by \href{https://svn.stsci.edu/trac/ssb/stsci\_python/browser/stsdas/trunk/stsdas/pkg/hst\_calib/synphot/bandpar/comppar.x}{comppar} called by {\color{red}\bfseries{}{}`bandpar{}`\_}.

\item {} 
\emph{Source code}: \href{https://svn.stsci.edu/trac/ssb/stsci\_python/browser/stsdas/trunk/stsdas/lib/synphot/rmslam.x}{rmslam.x}

\item {} 
\emph{References}: {\hyperref[references:ref1]{\emph{1 sections 5.1,7.1}}}, {\hyperref[references:ref2]{\emph{2}}}

\end{itemize}


\section{Synphot Equations}
\label{main:synphot-equations}\label{main:id1}
The \href{http://stsdas.stsci.edu/stsci\_python\_epydoc/SynphotManual.pdf}{Synphot Manual} section 5.1 gives the equation for RMS bandwidth as
\begin{gather}
\begin{split}\lambda_{rms}^2 = \bar{\lambda}^2 \frac{\int P_{\lambda} \ln(\lambda/\bar{\lambda})^2
\,d\lambda/\lambda}{\int P_{\lambda} \,d\lambda/\lambda}\end{split}\notag
\end{gather}
where
\begin{gather}
\begin{split}\bar{\lambda} = \exp \left[ \frac{\int P_{\lambda} \ln(\lambda) \,d\lambda/\lambda}
{\int P_{\lambda} \,d\lambda/\lambda} \right].\end{split}\notag
\end{gather}
The Synphot function \href{https://svn.stsci.edu/trac/ssb/stsci\_python/browser/stsdas/trunk/stsdas/lib/synphot/rmslam.x}{rmslam} does appear to implement this procedure for
calculating the RMS width of the bandpass. The source code references the WF/PC-1
Instrument Handbook as the source of the equation for RMS width and references
Schneider, Gunn and Hoessel (1983 ApJ 264,337) as the source for the equation
for mean wavelength.

A copy of the WF/PC-1 Instrument Handbook could not be found so it has not been
verified that the Synphot code faithfully reproduces whatever may be documented
there.

The
\href{https://svn.stsci.edu/trac/ssb/stsci\_python/browser/stsdas/trunk/stsdas/pkg/hst\_calib/synphot/doc/bandpar.hlp}{bandpar help file}
gives the same equations as above for the RMS width but the \href{http://stsdas.stsci.edu/stsci\_python\_epydoc/SynphotManual.pdf}{Synphot Manual}
in section 7.1 gives different equations when describing bandpar. The equations
in section 7.1 are the same as used by Pysynphot, shown below.


\section{Pysynphot Equations}
\label{main:pysynphot-equations}\label{main:rmslam}
The Pysynphot \href{https://trac.assembla.com/astrolib/browser/trunk/pysynphot/lib/pysynphot/spectrum.py\#L1106}{rmswidth} source code references Koornneef et al 1987, page 836
as the source for its RMS width calculation, which is
\begin{gather}
\begin{split}\lambda_{rms}^2 = \frac{\int P_{\lambda} (\lambda - \bar{\lambda})^2 \,d\lambda}
{\int P_{\lambda} \,d\lambda}\end{split}\notag
\end{gather}
where
\begin{gather}
\begin{split}\bar{\lambda} = \frac{\int \lambda P_{\lambda} \,d\lambda}
{\int P_{\lambda} \,d\lambda}.\end{split}\notag
\end{gather}

\chapter{References}
\label{references:references}\label{references::doc}\label{references:rmswidth}\phantomsection\label{references:ref1}\begin{enumerate}
\item {} 
Synphot Manual: \href{http://stsdas.stsci.edu/stsci\_python\_epydoc/SynphotManual.pdf}{http://stsdas.stsci.edu/stsci\_python\_epydoc/SynphotManual.pdf}

\end{enumerate}
\phantomsection\label{references:ref2}\begin{enumerate}
\setcounter{enumi}{1}
\item {} 
Schneider, Gunn and Hoessel (1983 ApJ 264,337)

\end{enumerate}
\phantomsection\label{references:ref3}\begin{enumerate}
\setcounter{enumi}{2}
\item {} 
Koornneef et al., 1987

\end{enumerate}



\renewcommand{\indexname}{Index}
\printindex
\end{document}
